<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Biblioteca de recursos</title>
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Raleway', sans-serif;
  background: linear-gradient(to top, #5f0088, #8600BF);
  min-height: 100vh;
  margin:0;
  padding:30px;
  color:white;
  display:flex;
  justify-content:center;
}

.container{
  display:flex;
  flex-direction:column;
  gap:20px;
  max-width:900px;
  width:100%;
}

h1{
  text-align:center;
  font-size:24px;
  margin-bottom:20px;
}

/* Tarjetas de archivos */
.card{
  background: rgba(255,255,255,0.12);
  padding:20px;
  border-radius:16px;
  display:flex;
  justify-content: space-between;
  align-items: center;
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.file-name{
  font-size:16px;
  word-break: break-all;
}

.download-btn{
  background:white;
  color:#8600BF;
  border:2px solid white;
  padding:10px 18px;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;
  transition: transform .3s ease, box-shadow .3s ease;
  text-decoration:none;
}

.download-btn:hover{
  transform: scale(1.05);
  box-shadow:0 8px 20px rgba(0,0,0,0.25);
}

.download-btn svg{
  width:20px;
  height:20px;
}

#msg{
  text-align:center;
  margin-top:15px;
  min-height:18px;
  font-size:14px;
}

@media(max-width: 600px){
  .card{
    flex-direction:column;
    gap:10px;
    align-items:flex-start;
  }
  .download-btn{
    width:100%;
    justify-content:center;
  }
}
</style>
</head>

<body>
<div class="container">
  <h1>Biblioteca de recursos</h1>
  <div id="filesContainer"></div>
  <p id="msg">Cargando archivos...</p>
</div>

<script>
// Pega aquí la URL de tu Web App publicada
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyYewBEx7OY6E091vsWoQJyj1KrZLOpnFLVxvu0BpeDe5aaHsMeaPU4PYJ5MSw-abGAbQ/exec";

async function loadFiles(){
  const container = document.getElementById("filesContainer");
  const msg = document.getElementById("msg");
  container.innerHTML = "";
  msg.innerText = "Cargando archivos...";

  try{
    const response = await fetch(WEB_APP_URL+"?list=true");

    if(!response.ok){
      msg.innerText = "Error al conectar con la Web App.";
      return;
    }

    const files = await response.json();

    if(!files || files.length === 0){
      msg.innerText = "No hay archivos en la carpeta aún.";
      return;
    }

    msg.innerText = "";

    files.forEach(file=>{
      const card = document.createElement("div");
      card.className = "card";

      const name = document.createElement("div");
      name.className = "file-name";
      name.innerText = file.name;

      const btn = document.createElement("a");
      btn.className = "download-btn";
      btn.href = file.url;
      btn.target = "_blank";
      btn.innerHTML = `
        Descargar
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
      `;

      card.appendChild(name);
      card.appendChild(btn);
      container.appendChild(card);
    });

  }catch(err){
    console.error(err);
    msg.innerText = "Error al cargar los archivos. Verifica la URL y permisos de la Web App.";
  }
}

loadFiles();
</script>
</body>
</html>
